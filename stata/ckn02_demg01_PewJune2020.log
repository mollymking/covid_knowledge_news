--------------------------------------------------------------------------------
      name:  ckn02_demg01_PewJune2020
       log:  /Users/mmking/Documents/SocResearch/COVID_Knowledge_News/covid_know
> ledge_news/stata/ckn02_demg01_PewJune2020.log
  log type:  text
 opened on:  20 Mar 2023, 13:13:56

. ***-----------------------------***
. 
. //      project:        Knowledge of COVID & News Sources
. //  task:       Create Demographic Variables
. /*  data:    */ di "`dataset'"
01_PewJune2020

. 
. //  github:     covid_knowledge_news
. //  OSF:                https://osf.io/qf624/
. 
. //  author:     Molly King
. 
. display "$S_DATE  $S_TIME"
20 Mar 2023  13:13:56

. 
. ***--------------------------***
. // # PROGRAM SETUP
. ***-----------------------------***
. 
. version 16 // keeps program consistent for future replications

. set linesize 80

. clear all

. set more off

. 
. use $deriv/ckn01_impe01_PewJune2020.dta, clear
(01_PewJune2020 data with weights: Pathways June 2020 (ATP W68))

. 
. *Details on demographic variables from:
. * https://www.pewresearch.org/wp-content/uploads/2018/05/Codebook-and-instruct
> ions-for-working-with-ATP-data.pdf
. 
. ***-----------------------------***
. // # YEAR
. ***-----------------------------***
. 
. *All interviews carried out in June 2020
. /*
>         "Last year, that is in [FILL LAST YEAR], 
>         what was your total family income from all sources,
>         before taxes?  (READ)"
> */
. 
. gen year = 2019

. local year "year"

. label var year "Year for income was 2019"

. 
. gen survey_year = 2020

. 
. ***-----------------------------***
. // # GENDER
. ***-----------------------------***
. 
. local gender_var f_sex

. 
. tab `gender_var', m

        Sex |      Freq.     Percent        Cum.
------------+-----------------------------------
       Male |      4,373       45.30       45.30
     Female |      5,262       54.51       99.80
    Refused |         19        0.20      100.00
------------+-----------------------------------
      Total |      9,654      100.00

. tab `gender_var', nolab m

        Sex |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      4,373       45.30       45.30
          2 |      5,262       54.51       99.80
         99 |         19        0.20      100.00
------------+-----------------------------------
      Total |      9,654      100.00

. 
. include $stata/ckn02_demg00_include_female_from2W_1M.doi 

. *! include file to convert gender variable
. *! Produces gender dummy bariable from woman=2-->fem=1; man=1-->man=0
. *! version 1.1 \ molly king 2017-03-29
. 
. gen dB_fem = . 
(9,654 missing values generated)

.         replace dB_fem = 1 if `gender_var' == 2
(5,262 real changes made)

.         replace dB_fem = 0 if `gender_var' == 1
(4,373 real changes made)

. 
. label var dB_fem "Respondent's sex (=1 if female)" 

. label define dB_fem 0 "0_Male" 1 "1_Female"

.         label val dB_fem dB_fem

. 
. notes dB_fem: Created from `gender_var' in `data_using' \ `do_file'.do mmk $S_
> DATE

. 
. 
. 
. ***--------------------------***
. // # RACE / ETHNICITY
. ***-----------------------------***
. 
. local race_var f_racecmb

. tab `race_var'

           Combining race |      Freq.     Percent        Cum.
--------------------------+-----------------------------------
                    White |      7,694       79.70       79.70
Black or African American |        774        8.02       87.71
  Asian or Asian-American |        285        2.95       90.67
               Mixed Race |        374        3.87       94.54
       Or some other race |        316        3.27       97.81
                  Refused |        211        2.19      100.00
--------------------------+-----------------------------------
                    Total |      9,654      100.00

. tab `race_var', m nolab

  Combining |
       race |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      7,694       79.70       79.70
          2 |        774        8.02       87.71
          3 |        285        2.95       90.67
          4 |        374        3.87       94.54
          5 |        316        3.27       97.81
         99 |        211        2.19      100.00
------------+-----------------------------------
      Total |      9,654      100.00

. 
. local hisp_var f_hisp

. if "`hisp_var'" != "none" {
.         tab `hisp_var', m

   HISP.Are |
     you of |
  Hispanic, |
 Latino, or |
    Spanish |
    origin, |
    such as |
   Mexican, |
 Puerto Ric |      Freq.     Percent        Cum.
------------+-----------------------------------
        Yes |      1,645       17.04       17.04
         No |      7,971       82.57       99.61
    Refused |         38        0.39      100.00
------------+-----------------------------------
      Total |      9,654      100.00
.         tab `hisp_var', m nolab

   HISP.Are |
     you of |
  Hispanic, |
 Latino, or |
    Spanish |
    origin, |
    such as |
   Mexican, |
 Puerto Ric |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      1,645       17.04       17.04
          2 |      7,971       82.57       99.61
         99 |         38        0.39      100.00
------------+-----------------------------------
      Total |      9,654      100.00
.         tab `race_var' `hisp_var'

                      |    HISP.Are you of Hispanic,
                      | Latino, or Spanish origin, such
                      |      as Mexican, Puerto Ric
       Combining race |       Yes         No    Refused |     Total
----------------------+---------------------------------+----------
                White |     1,092      6,598          4 |     7,694 
Black or African Amer |        37        737          0 |       774 
Asian or Asian-Americ |         7        278          0 |       285 
           Mixed Race |       164        208          2 |       374 
   Or some other race |       261         55          0 |       316 
              Refused |        84         95         32 |       211 
----------------------+---------------------------------+----------
                Total |     1,645      7,971         38 |     9,654 
. }

. 
. *don't know/refused code(s) for `race_var'
. local race_missing_condition `"`race_var' == 99"'

. 
. local white_race_value =        1

. local black_race_value =        2

. local asian_race_value =        3

. local other_race_value =        5

. local mult_race_value =         4

. local amerInd_race_value        none

. local hisp_value =                      1

. 
. include $stata/ckn02_demg00_racethnicity.doi

. *! include file to label race/ethnicity variables
. *! version 1.0 \ molly king 2017-01-20
. 
.   *compilation of originally individual include files that programmed each rac
> e/ethnicity separate
. ***--------------------------***
. 
. // #1 GENERATE ALL VARIABLES, AND LABEL, ADD NOTES
. 
. // White
.                 gen dB_rwhite = 0

.                 // Replace each with . for missing race if there is a race mis
> sing condition: 
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rwhite = . if `race_var' == `race_m
> issing_condition' // don't know/refused
(0 real changes made)
.                         }

.                 label var dB_rwhite "Non-Hispanic White race = 1"

.                         label define dB_rwhite 0 "0_NotWhite" 1 "1_White"

.                 label val dB_rwhite dB_rwhite

.                 notes dB_rwhite: White respondent race created from `race_var'
>  & `hisp_var' in `dataset' \ ki`category'`dataset'.do mmk $S_DATE

. 
. // Black
.                 gen dB_rblack = 0

.                 // Replace each with . for missing race if there is a race mis
> sing condition: 
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rblack = . if  `race_var' == `race_
> missing_condition' // don't know/refused
(0 real changes made)
.                         }

.                 label var dB_rblack "Non-Hispanic Black/AfAmer race = 1"

.                 label define dB_rblack 0 "0_NotBlack" 1 "1_Black"

.                         label val dB_rblack dB_rblack

.                 notes dB_rblack: Black/AfAmer race created from `race_var' & `
> hisp_var' in `dataset' \ ki`category'`dataset'.do mmk $S_DATE

. 
. // Asian
.         if "`asian_race_value'" != "none" {
.                 gen dB_rasian = 0
.                 // Replace each with . for missing race if there is a race mis
> sing condition: 
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rasian = . if `race_var' == `race_m
> issing_condition' 
(0 real changes made)
.                         }
.                 label var dB_rasian "Non-Hispanic Asian race = 1"
.                 label define dB_rasian 0 "0_NotAsian" 1 "1_Asian"
.                         label val dB_rasian dB_rasian
.                 notes dB_rasian: Asian race created from `race_var' & `hisp_va
> r' in `dataset' \ ki`category'`dataset'.do mmk $S_DATE    
.         }

. 
. // Hispanic
.         if "`hisp_value'" != "none" {
.                 gen dB_rhisp = 0
.                 // Replace each with . for missing race if there is a race mis
> sing condition: 
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rhisp  = . if `race_var' == `race_m
> issing_condition' 
(0 real changes made)
.                         }
.                 label var dB_rhisp  "Hispanic ethnicity = 1"
.                 label define dB_rhisp  0 "0_NotHispanic" 1 "1_Hispanic"
.                         label val dB_rhisp dB_rhisp     
.                 notes dB_rhisp: Hispanic ethnicity only created from `race_var
> ' & `hisp_var' in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.         }

. 
. // Other
.         if "`mult_race_value'" != "none" |  "`other_race_value'" != "none" |  
> "`amerInd_race_value'" != "none" {
.                 gen dB_rother = 0
.                 // Replace each with . for missing race if there is a race mis
> sing condition: 
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rother = . if `race_var' == `race_m
> issing_condition' // don't know/refused
(0 real changes made)
.                         }
.                 label var dB_rother "Non-Hispanic Other, mixed race = 1"
.                 label define dB_rother 0 "0_NotOther" 1 "1_Mixed/OtherRace"
.                         label val dB_rother dB_rother   
.                 notes dB_rother: Other, unknown, or mixed race created from `r
> ace_var' & `hisp_var' in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.         }

.         
.         
. // All Categories
.         gen dG_race = .
(9,654 missing values generated)

.         label var dG_race "Categorical race variable"

.         label define race_5categ 1 "White" 2 "Black" 3 "Asian" 4 "Hispanic" 5 
> "Other/mixed"

.                 label val dG_race race_5categ

.         notes dG_race: Race/ethnicity categorical variable, created from `race
> _var' & `hisp_var'  variable in `dataset' \ ki`category'`dataset'.do mmk $S_DA
> TE

.         
. 
. ***--------------------------***
. 
. // #2 SEPARATE RACE AND HISPANIC VARIABLES
. 
. if "`hisp_var'" != "none" {
. 
. *White: dB_rwhite
.         if "`white_race_value'" != "none" {
.                 replace dB_rwhite = 1   if `race_var' == `white_race_value' & 
> `hisp_var' != `hisp_value'
(6,602 real changes made)
.                 replace dG_race = 1     if `race_var' == `white_race_value' & 
> `hisp_var' != `hisp_value'
(6,602 real changes made)
.         }
.         
. *Black: dB_rblack
.         if "`black_race_value'" != "none" {
.                 replace dB_rblack = 1   if `race_var' == `black_race_value' & 
> `hisp_var' != `hisp_value'
(737 real changes made)
.                 replace dG_race = 2     if `race_var' == `black_race_value' & 
> `hisp_var' != `hisp_value'
(737 real changes made)
.         }
.         
. *Asian: dB_rasian
.         if "`asian_race_value'" != "none" {
.                 replace dB_rasian = 1   if `race_var' == `asian_race_value' & 
> `hisp_var' != `hisp_value' 
(278 real changes made)
.                 replace dG_race = 3     if `race_var' == `asian_race_value' & 
> `hisp_var' != `hisp_value' 
(278 real changes made)
.         }
.                 
. *Other/mixed: dB_rother
.         if "`other_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `other_race_value' & 
> `hisp_var' != `hisp_value' 
(55 real changes made)
.                 replace dG_race = 5     if `race_var' == `other_race_value' & 
> `hisp_var' != `hisp_value' 
(55 real changes made)
.         }
.         if "`mult_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `mult_race_value' & `
> hisp_var' != `hisp_value' 
(210 real changes made)
.                 replace dG_race = 5     if `race_var' == `mult_race_value' & `
> hisp_var' != `hisp_value' 
(210 real changes made)
.         }
.         if "`amerInd_race_value'" != "none" {
.                  replace dB_rother = 1  if `race_var' == `amerInd_race_value' 
> & `hisp_var' != `hisp_value' 
.                  replace dG_race = 5    if `race_var' == `amerInd_race_value' 
> & `hisp_var' != `hisp_value' 
.         }
.         
. *Hispanic: dB_rhisp
.                 replace dB_rhisp = 1    if `hisp_var' == `hisp_value'
(1,645 real changes made)
.                 replace dG_race = 4     if `hisp_var' == `hisp_value'
(1,645 real changes made)
. }

. 
. 
. ***--------------------------***
. 
. // #3 with RACE variable only
. 
. if "`hisp_var'" == "none" {
. 
. *White: dB_rwhite
.         if "`white_race_value'" != "none" {
.                 replace dB_rwhite = 1   if `race_var' == `white_race_value'
.                 replace dG_race = 1     if `race_var' == `white_race_value'
.         }
.         
. *Black: dB_rblack
.         if "`black_race_value'" != "none" {
.                 replace dB_rblack = 1   if `race_var' == `black_race_value'
.                 replace dG_race = 2     if `race_var' == `black_race_value'
.         }
.         
. *Asian: dB_rasian
.         if "`asian_race_value'" != "none" {
.                 replace dB_rasian = 1   if `race_var' == `asian_race_value'
.                 replace dG_race = 3     if `race_var' == `asian_race_value'
.         }
.         
. *Other/mixed: dB_rother
.         if "`other_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `other_race_value'
.                 replace dG_race = 5     if `race_var' == `other_race_value'
.         }
.         if "`mult_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `mult_race_value'
.                 replace dG_race = 5     if `race_var' == `mult_race_value'
.         }
.         if "`amerInd_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `amerInd_race_value'
.                 replace dG_race = 5     if `race_var' == `amerInd_race_value'
.         }
.         
. *Hispanic: dB_rhisp
.         if "`hisp_value'" != "none" {
.                 replace dB_rhisp = 1    if `race_var' == `hisp_value'
.                 replace dG_race = 4     if `race_var' == `hisp_value'
.         }
. }

.         
. ***--------------------------***
. 
. //else {
. //      display as err /*
. //      */ "Need to enter either name of Hispanic variable or none after local
>  hisp_var"
. //      exit 198
. //}
.         
. ***--------------------------***
.         
. // #4 CHECK ALL RESULTING VARIABLES     
. ***check all to ensure correct***
. 
. 
. *Check White
. capture confirm variable dB_rwhite

. if !_rc {
.         tab `race_var' dB_rwhite, m

                      |  Non-Hispanic White
                      |       race = 1
       Combining race | 0_NotWhit    1_White |     Total
----------------------+----------------------+----------
                White |     1,092      6,602 |     7,694 
Black or African Amer |       774          0 |       774 
Asian or Asian-Americ |       285          0 |       285 
           Mixed Race |       374          0 |       374 
   Or some other race |       316          0 |       316 
              Refused |       211          0 |       211 
----------------------+----------------------+----------
                Total |     3,052      6,602 |     9,654 
. }

. 
. *Check Black
. capture confirm variable dB_rblack

. if !_rc {
.         tab `race_var' dB_rblack, m

                      |     Non-Hispanic
                      | Black/AfAmer race = 1
       Combining race | 0_NotBlac    1_Black |     Total
----------------------+----------------------+----------
                White |     7,694          0 |     7,694 
Black or African Amer |        37        737 |       774 
Asian or Asian-Americ |       285          0 |       285 
           Mixed Race |       374          0 |       374 
   Or some other race |       316          0 |       316 
              Refused |       211          0 |       211 
----------------------+----------------------+----------
                Total |     8,917        737 |     9,654 
. }

. 
. *Check Asian
. capture confirm variable dB_rasian

. if !_rc {
.         tab `race_var' dB_rasian, m

                      |  Non-Hispanic Asian
                      |       race = 1
       Combining race | 0_NotAsia    1_Asian |     Total
----------------------+----------------------+----------
                White |     7,694          0 |     7,694 
Black or African Amer |       774          0 |       774 
Asian or Asian-Americ |         7        278 |       285 
           Mixed Race |       374          0 |       374 
   Or some other race |       316          0 |       316 
              Refused |       211          0 |       211 
----------------------+----------------------+----------
                Total |     9,376        278 |     9,654 
. } 

. 
. *Check Other
. capture confirm variable dB_rother

. if !_rc {
.         tab `race_var' dB_rother, m

                      |  Non-Hispanic Other,
                      |    mixed race = 1
       Combining race | 0_NotOthe  1_Mixed/O |     Total
----------------------+----------------------+----------
                White |     7,694          0 |     7,694 
Black or African Amer |       774          0 |       774 
Asian or Asian-Americ |       285          0 |       285 
           Mixed Race |       164        210 |       374 
   Or some other race |       261         55 |       316 
              Refused |       211          0 |       211 
----------------------+----------------------+----------
                Total |     9,389        265 |     9,654 
. }

. 
. *Check Hispanic
. capture confirm variable dB_rhisp

. if !_rc {
.         tab `race_var' dB_rhisp, m

                      | Hispanic ethnicity =
                      |           1
       Combining race | 0_NotHisp  1_Hispani |     Total
----------------------+----------------------+----------
                White |     6,602      1,092 |     7,694 
Black or African Amer |       737         37 |       774 
Asian or Asian-Americ |       278          7 |       285 
           Mixed Race |       210        164 |       374 
   Or some other race |        55        261 |       316 
              Refused |       127         84 |       211 
----------------------+----------------------+----------
                Total |     8,009      1,645 |     9,654 
. }

. 
. *Check Categorical Race Variable
. tab `race_var' dG_race, m

                      |          Categorical race variable
       Combining race |     White      Black      Asian   Hispanic |     Total
----------------------+--------------------------------------------+----------
                White |     6,602          0          0      1,092 |     7,694 
Black or African Amer |         0        737          0         37 |       774 
Asian or Asian-Americ |         0          0        278          7 |       285 
           Mixed Race |         0          0          0        164 |       374 
   Or some other race |         0          0          0        261 |       316 
              Refused |         0          0          0         84 |       211 
----------------------+--------------------------------------------+----------
                Total |     6,602        737        278      1,645 |     9,654 


                      |   Categorical race
                      |       variable
       Combining race | Other/mix          . |     Total
----------------------+----------------------+----------
                White |         0          0 |     7,694 
Black or African Amer |         0          0 |       774 
Asian or Asian-Americ |         0          0 |       285 
           Mixed Race |       210          0 |       374 
   Or some other race |        55          0 |       316 
              Refused |         0        127 |       211 
----------------------+----------------------+----------
                Total |       265        127 |     9,654 

. tab dG_race `race_var', m

Categorical |
       race |                     Combining race
   variable |     White  Black or   Asian or   Mixed Rac  Or some o |     Total
------------+-------------------------------------------------------+----------
      White |     6,602          0          0          0          0 |     6,602 
      Black |         0        737          0          0          0 |       737 
      Asian |         0          0        278          0          0 |       278 
   Hispanic |     1,092         37          7        164        261 |     1,645 
Other/mixed |         0          0          0        210         55 |       265 
          . |         0          0          0          0          0 |       127 
------------+-------------------------------------------------------+----------
      Total |     7,694        774        285        374        316 |     9,654 


Categorical | Combining
       race |    race
   variable |   Refused |     Total
------------+-----------+----------
      White |         0 |     6,602 
      Black |         0 |       737 
      Asian |         0 |       278 
   Hispanic |        84 |     1,645 
Other/mixed |         0 |       265 
          . |       127 |       127 
------------+-----------+----------
      Total |       211 |     9,654 

. if "`hisp_var'" != "none" {
.         tab dG_race `hisp_var', m

            |    HISP.Are you of Hispanic,
Categorical | Latino, or Spanish origin, such
       race |      as Mexican, Puerto Ric
   variable |       Yes         No    Refused |     Total
------------+---------------------------------+----------
      White |         0      6,598          4 |     6,602 
      Black |         0        737          0 |       737 
      Asian |         0        278          0 |       278 
   Hispanic |     1,645          0          0 |     1,645 
Other/mixed |         0        263          2 |       265 
          . |         0         95         32 |       127 
------------+---------------------------------+----------
      Total |     1,645      7,971         38 |     9,654 
. }

. 
. 
. 
. * Create white/nonwhite variables
. gen dB_bipoc = .
(9,654 missing values generated)

. 
. replace dB_bipoc = 1 if `race_var' == `black_race_value'
(774 real changes made)

. replace dB_bipoc = 1 if `race_var' == `asian_race_value' 
(285 real changes made)

. replace dB_bipoc = 1 if `race_var' == `other_race_value'
(316 real changes made)

. replace dB_bipoc = 1 if `race_var' == `mult_race_value'
(374 real changes made)

. replace dB_bipoc = 1 if `race_var' == `hisp_value'
(7,694 real changes made)

. 
. replace dB_bipoc = 0 if `race_var' == `white_race_value'
(7,694 real changes made)

. 
. replace dB_bipoc = . if `race_missing_condition'
(0 real changes made)

. 
. label var dB_bipoc "BIPOC Binary race variable"

. label define dB_bipoc 1 "1_BIPOC" 0 "0_White"

.         label val  dB_bipoc  dB_bipoc

. 
.         
. ***--------------------------***
. // # EDUCATION
. ***-----------------------------***
. 
. local edu_var f_educcat2

. tab `edu_var'

     Education level category 2 |      Freq.     Percent        Cum.
--------------------------------+-----------------------------------
          Less than high school |        243        2.52        2.52
           High school graduate |      1,085       11.24       13.76
        Some college, no degree |      1,930       19.99       33.75
             Associate's degree |        946        9.80       43.55
College graduate/some post grad |      2,844       29.46       73.01
                   Postgraduate |      2,588       26.81       99.81
                        Refused |         18        0.19      100.00
--------------------------------+-----------------------------------
                          Total |      9,654      100.00

. tab `edu_var', nolab m

  Education |
      level |
 category 2 |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        243        2.52        2.52
          2 |      1,085       11.24       13.76
          3 |      1,930       19.99       33.75
          4 |        946        9.80       43.55
          5 |      2,844       29.46       73.01
          6 |      2,588       26.81       99.81
         99 |         18        0.19      100.00
------------+-----------------------------------
      Total |      9,654      100.00

. 
. *don't know/refused code(s) for `edu_var'
. local edu_missing_condition `"`edu_var' == 99"'

. 
. * Conditions for each category
. local lHS_condition     `"`edu_var' == 1"'

. local HS_condition              `"`edu_var' == 2"'

. local sCol_condition    `"`edu_var' == 3 | `edu_var' == 4"'

. local col_condition             `"`edu_var' == 5"'

. local grad_condition    `"`edu_var' == 6"'

. 
. include $stata/ckn02_demg00_education.doi

. *! include file to label education variables
. *! version 1.0 \ molly king 2017-01-24
. 
.   *compilation of originally individual include files that programmed each edu
> cation variable separate
. ***--------------------------***
. 
. // #1 GENERATE ALL VARIABLES, AND LABEL, ADD NOTES
. 
. 
. // Categorical Education Variable
.         gen dG_edu = .
(9,654 missing values generated)

.         label var dG_edu "Categorical education variable"

.         label define edu_5categ 1 "< HS" 2 "HS" 3 "some college" 4 "college" 5
>  "grad school"

.                 label val dG_edu edu_5categ

.         notes dG_edu: Education categorical variable, created from `edu_var' v
> ariable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE

. 
.         
. // Less than HS
.         if "`lHS_condition'" != "none" {
.                 gen dB_edu_lHS = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_lHS = . if `edu_missing_conditi
> on'
(18 real changes made, 18 to missing)
.                         }
.                 label var dB_edu_lHS "<HS"
.                 label define dB_edu_lHS 0 "0_>HS" 1 "1_<HS"
.                         label val dB_edu_lHS dB_edu_lHS
.                 notes dB_edu_lHS: Less than HS edu. created from `edu_var' var
> iable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.                 
.                 replace dB_edu_lHS = 1 if `lHS_condition'
(243 real changes made)
.                 replace dG_edu     = 1 if `lHS_condition'
(243 real changes made)
.         }

.         
. 
. // High School
.         if "`HS_condition'" != "none" {
.                 gen dB_edu_HS = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_HS = . if `edu_missing_conditio
> n'
(18 real changes made, 18 to missing)
.                         }
.                 label var dB_edu_HS "HS"
.                 label define dB_edu_HS 0 "0_notHS" 1 "1_HS"
.                         label val dB_edu_HS dB_edu_HS
.                 notes dB_edu_HS: HS edu. created from `edu_var' variable in `d
> ataset' \ ki`category'`dataset'.do mmk $S_DATE
.                 
.                 replace dB_edu_HS = 1 if `HS_condition'
(1,085 real changes made)
.                 replace dG_edu    = 2 if `HS_condition'
(1,085 real changes made)
.         }

.         
.         
. // Some college
.         if "`sCol_condition'" != "none" {
.                 gen dB_edu_sCol = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_sCol = . if `edu_missing_condit
> ion'
(18 real changes made, 18 to missing)
.                         }
.                 label var dB_edu_sCol "Some College / Voc. Training"
.                 label define dB_edu_sCol 0 "0_notSomeCol" 1 "1_SomeCol"
.                         label val dB_edu_sCol dB_edu_sCol
.                 notes dB_edu_sCol: Some College edu. created from `edu_var' va
> riable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
. 
.                 replace dB_edu_sCol = 1 if `sCol_condition'
(2,876 real changes made)
.                 replace dG_edu      = 3 if `sCol_condition'
(2,876 real changes made)
.         }

. 
.         
. // College Degree
.         if "`col_condition'" != "none" {
.                 gen dB_edu_col = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_col = . if `edu_missing_conditi
> on'
(18 real changes made, 18 to missing)
.                         }
.                 label var dB_edu_col "College degree"
.                 label define dB_edu_col 0 "0_notCol" 1 "1_College"
.                         label val dB_edu_col dB_edu_col
.                 notes dB_edu_col: College degree, created from `edu_var' varia
> ble in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.         
.                 replace dB_edu_col = 1 if `col_condition'
(2,844 real changes made)
.                 replace dG_edu     = 4 if `col_condition'
(2,844 real changes made)
.         }

.         
.         
. // Post-graduate degree
.         if "`grad_condition'" != "none" {
.                 gen dB_edu_grad = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_grad = . if `edu_missing_condit
> ion'
(18 real changes made, 18 to missing)
.                         }
.                 label var dB_edu_grad "Graduate degree"
.                 label define dB_edu_grad 0 "0_<GradDeg" 1 "1_GradDegree"
.                         label val dB_edu_grad dB_edu_grad
.                 notes dB_edu_grad: Graduate degree, created from `edu_var' var
> iable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.                 
.                 replace dB_edu_grad = 1 if `grad_condition'
(2,588 real changes made)
.                 replace dG_edu      = 5 if `grad_condition'
(2,588 real changes made)
.         }

.         
. 
. // College + post-graduate
.         if "`grad_condition'" != "none" & "`col_condition'" != "none" {
.                 gen dB_edu_colp = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_colp = . if `edu_missing_condit
> ion'
(18 real changes made, 18 to missing)
.                         }
.                 label var dB_edu_colp "College or Graduate Degree"
.                 label define dB_edu_colp 0 "0_NoBA" 1 "1_BA+"
.                         label val dB_edu_colp dB_edu_colp       
.                 notes dB_edu_colp: College plus grad, created from `edu_var' v
> ariable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
. 
.                 replace dB_edu_colp = 1  if `col_condition' | `grad_condition'
(5,432 real changes made)
.         }

. 
. // College + post-graduate, where can't disentangle the two
.         if "`grad_condition'" == "none" & "`col_condition'" != "none" {
.                 gen dB_edu_colp = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_colp = . if `edu_missing_condit
> ion'
.                         }
.                 label var dB_edu_colp "College or Graduate Degree"
.                 label define dB_edu_colp 0 "0_NoBA" 1 "1_BA+"
.                         label val dB_edu_colp dB_edu_colp       
.                 notes dB_edu_colp: College plus grad, created from `edu_var' v
> ariable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
. 
.                 replace dB_edu_colp = 1  if `col_condition' 
.                 // here, the college condition covers both those who have a ba
> chelors and more
.                 drop dB_edu_col
.         }

.         
. 
. 
. // # CHECK TO ENSURE CORRECT
. if "`lHS_condition'" != "none" {
.         tab `edu_var' dB_edu_lHS, m

      Education level |               <HS
           category 2 |     0_>HS      1_<HS          . |     Total
----------------------+---------------------------------+----------
Less than high school |         0        243          0 |       243 
 High school graduate |     1,085          0          0 |     1,085 
Some college, no degr |     1,930          0          0 |     1,930 
   Associate's degree |       946          0          0 |       946 
College graduate/some |     2,844          0          0 |     2,844 
         Postgraduate |     2,588          0          0 |     2,588 
              Refused |         0          0         18 |        18 
----------------------+---------------------------------+----------
                Total |     9,393        243         18 |     9,654 
. }

. if "`HS_condition'" != "none" {
.         tab `edu_var' dB_edu_HS, m

      Education level |                HS
           category 2 |   0_notHS       1_HS          . |     Total
----------------------+---------------------------------+----------
Less than high school |       243          0          0 |       243 
 High school graduate |         0      1,085          0 |     1,085 
Some college, no degr |     1,930          0          0 |     1,930 
   Associate's degree |       946          0          0 |       946 
College graduate/some |     2,844          0          0 |     2,844 
         Postgraduate |     2,588          0          0 |     2,588 
              Refused |         0          0         18 |        18 
----------------------+---------------------------------+----------
                Total |     8,551      1,085         18 |     9,654 
. }

. if "`sCol_condition'" != "none" {
.         tab `edu_var' dB_edu_sCol, m

      Education level |   Some College / Voc. Training
           category 2 | 0_notSome  1_SomeCol          . |     Total
----------------------+---------------------------------+----------
Less than high school |       243          0          0 |       243 
 High school graduate |     1,085          0          0 |     1,085 
Some college, no degr |         0      1,930          0 |     1,930 
   Associate's degree |         0        946          0 |       946 
College graduate/some |     2,844          0          0 |     2,844 
         Postgraduate |     2,588          0          0 |     2,588 
              Refused |         0          0         18 |        18 
----------------------+---------------------------------+----------
                Total |     6,760      2,876         18 |     9,654 
. }

. if "`col_condition'" != "none" & "`grad_condition'" != "none" {
.         tab `edu_var' dB_edu_col, m

      Education level |          College degree
           category 2 |  0_notCol  1_College          . |     Total
----------------------+---------------------------------+----------
Less than high school |       243          0          0 |       243 
 High school graduate |     1,085          0          0 |     1,085 
Some college, no degr |     1,930          0          0 |     1,930 
   Associate's degree |       946          0          0 |       946 
College graduate/some |         0      2,844          0 |     2,844 
         Postgraduate |     2,588          0          0 |     2,588 
              Refused |         0          0         18 |        18 
----------------------+---------------------------------+----------
                Total |     6,792      2,844         18 |     9,654 
. }

. if "`col_condition'" != "none" {
.         tab `edu_var' dB_edu_colp, m

      Education level |    College or Graduate Degree
           category 2 |    0_NoBA      1_BA+          . |     Total
----------------------+---------------------------------+----------
Less than high school |       243          0          0 |       243 
 High school graduate |     1,085          0          0 |     1,085 
Some college, no degr |     1,930          0          0 |     1,930 
   Associate's degree |       946          0          0 |       946 
College graduate/some |         0      2,844          0 |     2,844 
         Postgraduate |         0      2,588          0 |     2,588 
              Refused |         0          0         18 |        18 
----------------------+---------------------------------+----------
                Total |     4,204      5,432         18 |     9,654 
. }

. if "`grad_condition'" != "none" {
.         tab `edu_var' dB_edu_grad, m

      Education level |         Graduate degree
           category 2 | 0_<GradDe  1_GradDeg          . |     Total
----------------------+---------------------------------+----------
Less than high school |       243          0          0 |       243 
 High school graduate |     1,085          0          0 |     1,085 
Some college, no degr |     1,930          0          0 |     1,930 
   Associate's degree |       946          0          0 |       946 
College graduate/some |     2,844          0          0 |     2,844 
         Postgraduate |         0      2,588          0 |     2,588 
              Refused |         0          0         18 |        18 
----------------------+---------------------------------+----------
                Total |     7,048      2,588         18 |     9,654 
.         tab `edu_var' dB_edu_grad, m nolabel

 Education |
     level |         Graduate degree
category 2 |         0          1          . |     Total
-----------+---------------------------------+----------
         1 |       243          0          0 |       243 
         2 |     1,085          0          0 |     1,085 
         3 |     1,930          0          0 |     1,930 
         4 |       946          0          0 |       946 
         5 |     2,844          0          0 |     2,844 
         6 |         0      2,588          0 |     2,588 
        99 |         0          0         18 |        18 
-----------+---------------------------------+----------
     Total |     7,048      2,588         18 |     9,654 
. }

. tab `edu_var' dG_edu, m

      Education level |       Categorical education variable
           category 2 |      < HS         HS  some coll    college |     Total
----------------------+--------------------------------------------+----------
Less than high school |       243          0          0          0 |       243 
 High school graduate |         0      1,085          0          0 |     1,085 
Some college, no degr |         0          0      1,930          0 |     1,930 
   Associate's degree |         0          0        946          0 |       946 
College graduate/some |         0          0          0      2,844 |     2,844 
         Postgraduate |         0          0          0          0 |     2,588 
              Refused |         0          0          0          0 |        18 
----------------------+--------------------------------------------+----------
                Total |       243      1,085      2,876      2,844 |     9,654 


                      | Categorical education
      Education level |       variable
           category 2 | grad scho          . |     Total
----------------------+----------------------+----------
Less than high school |         0          0 |       243 
 High school graduate |         0          0 |     1,085 
Some college, no degr |         0          0 |     1,930 
   Associate's degree |         0          0 |       946 
College graduate/some |         0          0 |     2,844 
         Postgraduate |     2,588          0 |     2,588 
              Refused |         0         18 |        18 
----------------------+----------------------+----------
                Total |     2,588         18 |     9,654 

.         
. 
. 
. *3-category Education Variable
. gen dG_edu3 = .
(9,654 missing values generated)

. label var dG_edu3 "Categorical education variable"

. label define edu_3categ 1 "HS or less" 2 "some college" 3 "college+"

.         label val dG_edu3 edu_3categ

. notes dG_edu3: Education 3-categorical variable, created from `edu_var' variab
> le in `dataset' \ ki`category'`dataset'.do mmk $S_DATE

. 
. *High school or less
. gen dB_edu_HSl = 0

.         // Replace each with . for missing edu. if there is a edu. missing con
> dition: 
. replace dB_edu_HSl = . if `edu_missing_condition'
(18 real changes made, 18 to missing)

. label var dB_edu_HSl "HS or less"

. label define dB_edu_HSl 0 "0_>HS" 1 "1_HSless"

.         label val dB_edu_HSl dB_edu_HSl

. notes dB_edu_HSl: HS or less edu. created from `edu_var' variable in `dataset'
>  \ ki`category'`dataset'.do mmk $S_DATE

.                 
. replace dB_edu_HSl = 1 if `edu_var' == 1 |      `edu_var' == 2
(1,328 real changes made)

. replace dG_edu3    = 1 if `edu_var' == 1 |      `edu_var' == 2
(1,328 real changes made)

.         
. *some college
. replace dG_edu3    = 2 if `sCol_condition'
(2,876 real changes made)

. 
. *college plus
. *dB_edu_colp
. replace dG_edu3    = 3 if `col_condition' | `grad_condition'
(5,432 real changes made)

.         
.         
. tab dG_edu dG_edu3, m   

 Categorical |
   education |       Categorical education variable
    variable | HS or les  some coll   college+          . |     Total
-------------+--------------------------------------------+----------
        < HS |       243          0          0          0 |       243 
          HS |     1,085          0          0          0 |     1,085 
some college |         0      2,876          0          0 |     2,876 
     college |         0          0      2,844          0 |     2,844 
 grad school |         0          0      2,588          0 |     2,588 
           . |         0          0          0         18 |        18 
-------------+--------------------------------------------+----------
       Total |     1,328      2,876      5,432         18 |     9,654 

. 
. ***-----------------------------***
. // # AGE
. ***-----------------------------***
. 
. local age_var f_agecat

. 
. *codebook `age_var'
. *uselabel labels66, clear
. 
. tab `age_var', m

        Age |
   category |      Freq.     Percent        Cum.
------------+-----------------------------------
      18-29 |      1,034       10.71       10.71
      30-49 |      3,026       31.34       42.06
      50-64 |      2,967       30.73       72.79
        65+ |      2,591       26.84       99.63
    Refused |         36        0.37      100.00
------------+-----------------------------------
      Total |      9,654      100.00

. tab `age_var', m nolab

        Age |
   category |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      1,034       10.71       10.71
          2 |      3,026       31.34       42.06
          3 |      2,967       30.73       72.79
          4 |      2,591       26.84       99.63
         99 |         36        0.37      100.00
------------+-----------------------------------
      Total |      9,654      100.00

. 
. *don't know/refused code(s) for `age_var'
. local age_missing_condition `"`age_var' == 99"' //Refused

. 
. local age18_29_condition `"`age_var' == 1"' //  18-29

. local age30_49_condition `"`age_var' == 2"' //  30-49

. local age50_64_condition `"`age_var' == 3"'     // 50-64

. local age65p_condition   `"`age_var' == 4"'     // 65+

. 
. 
. // Categorical Age
. gen dG_age = .
(9,654 missing values generated)

.         label var dG_age "Categorical age variable"

.         label define age_4categ 1       "18-29" 2       "30-49" 3       "50-64
> " 4       "65plus"

.                 label val dG_age age_4categ

.         notes dG_age: Age categorical variable, created from `age_var' variabl
> e in `dataset' \ ckn`category'`dataset'.do mmk $S_DATE

. 
.         replace dG_age     = 1 if `age18_29_condition'
(1,034 real changes made)

.         replace dG_age     = 2 if `age30_49_condition'
(3,026 real changes made)

.         replace dG_age     = 3 if `age50_64_condition'
(2,967 real changes made)

.         replace dG_age     = 4 if `age65p_condition'
(2,591 real changes made)

.         
. local agelist "18_29 30_49 50_64 65p"

. foreach age of local agelist {
  2.         gen dB_age_`age' = 0
  3.         // Replace each with . for missing 
.                 if "`age_missing_condition'" != "none" {
  4.                         replace dB_age_`age' = . if `age_missing_condition'
  5.                 }
  6.         label var dB_age_`age' "Age category `age'"
  7.         label define dB_age_`age' 0 "Not `age'" 1 "`age'"
  8.                 label val dB_age_`age' dB_age_`age'
  9.         notes dB_age_`age': Age category `age'. created from `age_var' vari
> able in `dataset' \ ckn`category'`dataset'.do mmk $S_DATE
 10. 
.         replace dB_age_`age' = 1 if `age`age'_condition'
 11. }
(36 real changes made, 36 to missing)
(1,034 real changes made)
(36 real changes made, 36 to missing)
(3,026 real changes made)
(36 real changes made, 36 to missing)
(2,967 real changes made)
(36 real changes made, 36 to missing)
(2,591 real changes made)

. 
. *tab `age_var' dG_age, m
. *tab `age_var' dB_age_18_29, m
. *tab `age_var' dB_age_65p, m
. 
.         
. ***-----------------------------***
. // # RELIGION   
. ***-----------------------------***
. 
. tab f_relig f_born

                      |     BORN. Would you describe
                      |   yourself as a born-again or
                      |   evangelical Christian, or n
             Religion |       Yes         No  Don't kno |     Total
----------------------+---------------------------------+----------
           Protestant |     2,112      1,606         69 |     3,787 
       Roman Catholic |       190      1,795         31 |     2,016 
Mormon (Church of Jes |        32        134          2 |       168 
Orthodox (such as Gre |         4         35          0 |        39 
                Other |         5         18          7 |        30 
----------------------+---------------------------------+----------
                Total |     2,343      3,588        109 |     6,040 

. tab f_born, m nolabel

BORN. Would |
        you |
   describe |
yourself as |
          a |
 born-again |
         or |
evangelical |
 Christian, |
       or n |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      2,343       24.27       24.27
          2 |      3,588       37.17       61.44
         99 |        109        1.13       62.56
          . |      3,614       37.44      100.00
------------+-----------------------------------
      Total |      9,654      100.00

. tab f_born, m 

   BORN. Would you |
 describe yourself |
as a born-again or |
       evangelical |
   Christian, or n |      Freq.     Percent        Cum.
-------------------+-----------------------------------
               Yes |      2,343       24.27       24.27
                No |      3,588       37.17       61.44
Don't know/refused |        109        1.13       62.56
                 . |      3,614       37.44      100.00
-------------------+-----------------------------------
             Total |      9,654      100.00

. tab f_relig, nolabel

   Religion |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      3,787       39.23       39.23
          2 |      2,016       20.88       60.11
          3 |        168        1.74       61.85
          4 |         39        0.40       62.25
          5 |        261        2.70       64.96
          6 |         52        0.54       65.50
          7 |         70        0.73       66.22
          8 |         50        0.52       66.74
          9 |        633        6.56       73.30
         10 |        625        6.47       79.77
         11 |        233        2.41       82.18
         12 |      1,675       17.35       99.53
         99 |         45        0.47      100.00
------------+-----------------------------------
      Total |      9,654      100.00

. tab f_relig

                               Religion |      Freq.     Percent        Cum.
----------------------------------------+-----------------------------------
                             Protestant |      3,787       39.23       39.23
                         Roman Catholic |      2,016       20.88       60.11
Mormon (Church of Jesus Christ of Latte |        168        1.74       61.85
Orthodox (such as Greek, Russian, or so |         39        0.40       62.25
                                 Jewish |        261        2.70       64.96
                                 Muslim |         52        0.54       65.50
                               Buddhist |         70        0.73       66.22
                                  Hindu |         50        0.52       66.74
                                Atheist |        633        6.56       73.30
                               Agnostic |        625        6.47       79.77
                                  Other |        233        2.41       82.18
                  Nothing in particular |      1,675       17.35       99.53
                                Refused |         45        0.47      100.00
----------------------------------------+-----------------------------------
                                  Total |      9,654      100.00

. 
. // Conservative Protestant
. *following Evans & Hargittai 2020, assign those describing themselves as evang
> elical to conservative dummy variable
. 
. gen dB_rel_conP = 0

. replace dB_rel_conP = . if f_relig == 99 // refused
(45 real changes made, 45 to missing)

. replace dB_rel_conP = 1 if f_born == 1 & f_relig == 1 // protestant and "evang
> elical / born again"
(2,112 real changes made)

. 
. label define relig_conP ///
>         0       "Other"  ///
>         1       "Conservative Protestant"

. label val dB_rel_conP relig_conP

. 
. notes dB_rel_conP: Conservative Protestant, created from f_born variable in `d
> ataset' \ ckn`category'`dataset'.do mmk $S_DATE

.         
.         
. // Liberal Christian
. 
. gen dB_rel_libP = 0

. replace  dB_rel_libP = . if f_relig == 99 // refused
(45 real changes made, 45 to missing)

. replace  dB_rel_libP = 1 if f_born == 2 & f_relig == 1 // protestant and  NOT 
> "evangelical / born again"
(1,606 real changes made)

. label define relig_libP ///
>         0       "Other"  ///
>         1       "Liberal Protestant"    

. label val  dB_rel_libP relig_libP

. 
. notes  dB_rel_libP: Liberal Protestant, created from f_born variable in `datas
> et' \ ckn`category'`dataset'.do mmk $S_DATE

.         
.         
. // Catholic
. 
. gen dB_rel_cath = 0

. replace  dB_rel_cath = . if f_relig == 99 // refused
(45 real changes made, 45 to missing)

. replace  dB_rel_cath = 1 if f_relig == 2
(2,016 real changes made)

. 
. label define relig_cath ///
>         0       "Other"  ///
>         1       "Catholic"

. label val dB_rel_cath relig_cath

. 
. notes  dB_rel_cath: Catholic, created from f_born variable in `dataset' \ ckn`
> category'`dataset'.do mmk $S_DATE

.         
. 
. // Strong no-identity Christian 
. *tab f_relig f_attend if f_born !=1 & f_born !=2
. // Low participation Christian 
. 
. 
. // Other
. tab f_relig, m

                               Religion |      Freq.     Percent        Cum.
----------------------------------------+-----------------------------------
                             Protestant |      3,787       39.23       39.23
                         Roman Catholic |      2,016       20.88       60.11
Mormon (Church of Jesus Christ of Latte |        168        1.74       61.85
Orthodox (such as Greek, Russian, or so |         39        0.40       62.25
                                 Jewish |        261        2.70       64.96
                                 Muslim |         52        0.54       65.50
                               Buddhist |         70        0.73       66.22
                                  Hindu |         50        0.52       66.74
                                Atheist |        633        6.56       73.30
                               Agnostic |        625        6.47       79.77
                                  Other |        233        2.41       82.18
                  Nothing in particular |      1,675       17.35       99.53
                                Refused |         45        0.47      100.00
----------------------------------------+-----------------------------------
                                  Total |      9,654      100.00

. tab f_relig, m nolab

   Religion |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      3,787       39.23       39.23
          2 |      2,016       20.88       60.11
          3 |        168        1.74       61.85
          4 |         39        0.40       62.25
          5 |        261        2.70       64.96
          6 |         52        0.54       65.50
          7 |         70        0.73       66.22
          8 |         50        0.52       66.74
          9 |        633        6.56       73.30
         10 |        625        6.47       79.77
         11 |        233        2.41       82.18
         12 |      1,675       17.35       99.53
         99 |         45        0.47      100.00
------------+-----------------------------------
      Total |      9,654      100.00

. 
. gen dB_rel_oth = 0

. replace  dB_rel_oth = 1 if f_relig == 3  // mormon
(168 real changes made)

. replace  dB_rel_oth = 1 if f_relig == 4  // orthodox
(39 real changes made)

. replace  dB_rel_oth = 1 if f_relig == 5  // jewish
(261 real changes made)

. replace  dB_rel_oth = 1 if f_relig == 6  // muslim
(52 real changes made)

. replace  dB_rel_oth = 1 if f_relig == 7  // buddhist
(70 real changes made)

. replace  dB_rel_oth = 1 if f_relig == 8  // hindu
(50 real changes made)

. replace  dB_rel_oth = 1 if f_relig == 11 // other       
(233 real changes made)

. replace  dB_rel_oth = . if f_relig == 99  // refused
(45 real changes made, 45 to missing)

. 
. label define relig_other ///
>         0       "Christian,Catholics, Nones"  ///
>         1       "Other Religions"       

. label val dB_rel_oth relig_other

. 
. notes  dB_rel_oth: Other religions, created from f_born variable in `dataset' 
> \ ckn`category'`dataset'.do mmk $S_DATE

.         
. 
. // Nonreligious (Atheist, Agnostic, None)
. 
. gen dB_rel_none = 0

. replace dB_rel_none = 1 if f_relig == 9 // atheist
(633 real changes made)

. replace dB_rel_none = 1 if f_relig == 10 // agnostic
(625 real changes made)

. replace dB_rel_none = 1 if f_relig == 12 // nothing in particular
(1,675 real changes made)

. replace  dB_rel_none = . if f_relig == 99 // refused
(45 real changes made, 45 to missing)

.         
. label define relig_none ///
>         0       "Other" ///
>         1       "Nonreligious - Atheist / Agnostic / Nothing in particular"

. label val dB_rel_none relig_none

. 
. notes  dB_rel_none: Nonreligious, created from f_born variable in `dataset' \ 
> ckn`category'`dataset'.do mmk $S_DATE

. 
. 
. // Categorical
. 
. gen dG_relig = .
(9,654 missing values generated)

. replace  dG_rel = 1 if dB_rel_conP == 1 // Conservative Protestant
(2,112 real changes made)

. replace  dG_rel = 2 if dB_rel_libP == 1 // Liberal Protestant
(1,606 real changes made)

. replace  dG_rel = 3 if dB_rel_cath == 1 // Catholic
(2,016 real changes made)

. replace  dG_rel = 4 if dB_rel_oth == 1 // Other
(873 real changes made)

. replace  dG_rel = 5 if dB_rel_none == 1 // Nonreligious
(2,933 real changes made)

. replace  dG_rel = . if f_relig == 99  // refused
(0 real changes made)

. 
. 
. label define relig ///
>         1       "Conservative Protestant"       ///
>         2       "Liberal Protestant"            ///
>         3       "Catholic"                                      ///
>         4       "Other"                                         ///
>         5       "Nonreligious"  

. label val dG_rel relig

. 
. notes  dG_rel: Categorical religion, created from f_born variable in `dataset'
>  \ ckn`category'`dataset'.do mmk $S_DATE

. 
. tab  f_relig dG_rel, m

                      |                  dG_relig
             Religion | Conservat  Liberal P   Catholic      Other |     Total
----------------------+--------------------------------------------+----------
           Protestant |     2,112      1,606          0          0 |     3,787 
       Roman Catholic |         0          0      2,016          0 |     2,016 
Mormon (Church of Jes |         0          0          0        168 |       168 
Orthodox (such as Gre |         0          0          0         39 |        39 
               Jewish |         0          0          0        261 |       261 
               Muslim |         0          0          0         52 |        52 
             Buddhist |         0          0          0         70 |        70 
                Hindu |         0          0          0         50 |        50 
              Atheist |         0          0          0          0 |       633 
             Agnostic |         0          0          0          0 |       625 
                Other |         0          0          0        233 |       233 
Nothing in particular |         0          0          0          0 |     1,675 
              Refused |         0          0          0          0 |        45 
----------------------+--------------------------------------------+----------
                Total |     2,112      1,606      2,016        873 |     9,654 


                      |       dG_relig
             Religion | Nonreligi          . |     Total
----------------------+----------------------+----------
           Protestant |         0         69 |     3,787 
       Roman Catholic |         0          0 |     2,016 
Mormon (Church of Jes |         0          0 |       168 
Orthodox (such as Gre |         0          0 |        39 
               Jewish |         0          0 |       261 
               Muslim |         0          0 |        52 
             Buddhist |         0          0 |        70 
                Hindu |         0          0 |        50 
              Atheist |       633          0 |       633 
             Agnostic |       625          0 |       625 
                Other |         0          0 |       233 
Nothing in particular |     1,675          0 |     1,675 
              Refused |         0         45 |        45 
----------------------+----------------------+----------
                Total |     2,933        114 |     9,654 

. 
. 
. 
. 
. ***-----------------------------***
. // # PARTY / IDEOLOGY
. ***-----------------------------***
. tab f_partysum_final, m

     Party summary |      Freq.     Percent        Cum.
-------------------+-----------------------------------
      Rep/Lean Rep |      3,944       40.85       40.85
      Dem/Lean Dem |      5,439       56.34       97.19
DK/Refused/No lean |        271        2.81      100.00
-------------------+-----------------------------------
             Total |      9,654      100.00

. tab f_partysum_final, m nolab

      Party |
    summary |      Freq.     Percent        Cum.
------------+-----------------------------------
       1.00 |      3,944       40.85       40.85
       2.00 |      5,439       56.34       97.19
       9.00 |        271        2.81      100.00
------------+-----------------------------------
      Total |      9,654      100.00

. tab f_party_final

         Party |      Freq.     Percent        Cum.
---------------+-----------------------------------
    Republican |      2,367       24.52       24.52
      Democrat |      3,443       35.66       60.18
   Independent |      2,858       29.60       89.79
Something else |        896        9.28       99.07
       Refused |         90        0.93      100.00
---------------+-----------------------------------
         Total |      9,654      100.00

. 
. *F_PARTYSUM_FINAL
. *Party summary recoded off F_PARTY_FINAL and F_PARTYLN_FINAL.
.         // 1 Rep/Rep Lean
.         // 2 Dem/Dem Lean
.         // 3 Independent/No Lean
.         // 99 DK/Ref
.         
. // Political Party
. label define pol_party ///
>         0       "Republican"  ///
>         1       "Democrat" ///
>         2       "Independent"

. 
. gen dG_pol = .
(9,654 missing values generated)

.         replace dG_pol = 0 if f_party_final == 1        // Republican
(2,367 real changes made)

.         replace dG_pol = 1 if f_party_final == 2        // Democrat
(3,443 real changes made)

.         replace dG_pol = 2 if f_party_final == 3        // Independent
(2,858 real changes made)

. label var  dG_pol "Political Party"

. 
. label val dG_pol pol_party

. notes  dG_pol: Political party, created from f_party_final variable in `datase
> t' \ ckn`category'`dataset'.do mmk $S_DATE

.         
. tab f_party_final dG_pol, m

               |               Political Party
         Party | Republica   Democrat  Independe          . |     Total
---------------+--------------------------------------------+----------
    Republican |     2,367          0          0          0 |     2,367 
      Democrat |         0      3,443          0          0 |     3,443 
   Independent |         0          0      2,858          0 |     2,858 
Something else |         0          0          0        896 |       896 
       Refused |         0          0          0         90 |        90 
---------------+--------------------------------------------+----------
         Total |     2,367      3,443      2,858        986 |     9,654 

. 
. // Democratic Party - dB_dem - use with dB_ind
. label define dem_party ///
>         0       "Other"  ///  omitted "something else"
>         1       "Democrat"

. 
. gen dB_pol_dem  = .
(9,654 missing values generated)

.         replace  dB_pol_dem  = 0 if f_party_final == 1  // Repubs
(2,367 real changes made)

.         replace  dB_pol_dem = 1 if f_party_final == 2   // Dems
(3,443 real changes made)

.         replace  dB_pol_dem = 0 if f_party_final == 3   // Ind
(2,858 real changes made)

. label var dB_pol_dem  "Democratic Party"

. 
. label val dB_pol_dem dem_party

. notes dB_pol_dem : Binary Democratic, created from f_party_final variable in `
> dataset' \ ckn`category'`dataset'.do mmk $S_DATE

. 
. tab dB_pol_dem f_party_final, m

Democratic |                         Party
     Party | Republica   Democrat  Independe  Something    Refused |     Total
-----------+-------------------------------------------------------+----------
     Other |     2,367          0      2,858          0          0 |     5,225 
  Democrat |         0      3,443          0          0          0 |     3,443 
         . |         0          0          0        896         90 |       986 
-----------+-------------------------------------------------------+----------
     Total |     2,367      3,443      2,858        896         90 |     9,654 

. 
. // Independent - dB_ind - use with dB_dem
. label define ind_party ///
>         0       "Other"  /// omitted "something else"
>         1       "Independent"

. 
. gen dB_pol_ind = .
(9,654 missing values generated)

.         replace   dB_pol_ind = 0 if f_party_final == 1  // Rep
(2,367 real changes made)

.         replace   dB_pol_ind = 1 if f_party_final == 3  // Ind
(2,858 real changes made)

.         replace   dB_pol_ind = 0 if f_party_final == 2  // Dem
(3,443 real changes made)

. label var  dB_pol_ind "Independent"

. 
. label val  dB_pol_ind ind_party

. notes  dB_pol_ind: Binary Independent, created from f_party_final variable in 
> `dataset' \ ckn`category'`dataset'.do mmk $S_DATE

.         
. tab dB_pol_ind f_party_final, m

            |                         Party
Independent | Republica   Democrat  Independe  Something    Refused |     Total
------------+-------------------------------------------------------+----------
      Other |     2,367      3,443          0          0          0 |     5,810 
Independent |         0          0      2,858          0          0 |     2,858 
          . |         0          0          0        896         90 |       986 
------------+-------------------------------------------------------+----------
      Total |     2,367      3,443      2,858        896         90 |     9,654 

. 
.         
. // Democratic Party / lean - Binary
. label define partylean ///
>         0       "Republican / Rep lean"  ///
>         1       "Democrat / Dem lean"

. 
. gen dB_demlean = .
(9,654 missing values generated)

.         replace  dB_demlean = 0 if f_partysum_final == 1        
(3,944 real changes made)

.         replace  dB_demlean = 1 if f_partysum_final == 2
(5,439 real changes made)

. label var dB_demlean "Democratic Party / lean"

. 
. label val dB_demlean partylean

. notes dB_demlean: Binary Democratic / Dem lean, created from f_partysum_final 
> variable in `dataset' \ ckn`category'`dataset'.do mmk $S_DATE

. 
. 
. ***-----------------------------***
. // SAVE DATA    
. ***-----------------------------***
. 
. label data "`dataset' Demographics"

. notes: ckn`category'`dataset'.dta \ `dataset' with recoded dempgraphics \ ckn`
> category'`dataset'.do mmk $$_DATE

. compress
  variable year was float now int
  variable survey_year was float now int
  variable dB_fem was float now byte
  variable dB_rwhite was float now byte
  variable dB_rblack was float now byte
  variable dB_rasian was float now byte
  variable dB_rhisp was float now byte
  variable dB_rother was float now byte
  variable dG_race was float now byte
  variable dB_bipoc was float now byte
  variable dG_edu was float now byte
  variable dB_edu_lHS was float now byte
  variable dB_edu_HS was float now byte
  variable dB_edu_sCol was float now byte
  variable dB_edu_col was float now byte
  variable dB_edu_grad was float now byte
  variable dB_edu_colp was float now byte
  variable dG_edu3 was float now byte
  variable dB_edu_HSl was float now byte
  variable dG_age was float now byte
  variable dB_age_18_29 was float now byte
  variable dB_age_30_49 was float now byte
  variable dB_age_50_64 was float now byte
  variable dB_age_65p was float now byte
  variable dB_rel_conP was float now byte
  variable dB_rel_libP was float now byte
  variable dB_rel_cath was float now byte
  variable dB_rel_oth was float now byte
  variable dB_rel_none was float now byte
  variable dG_relig was float now byte
  variable dG_pol was float now byte
  variable dB_pol_dem was float now byte
  variable dB_pol_ind was float now byte
  variable dB_demlean was float now byte
  (965,400 bytes saved)

. datasignature set, reset
  9654:180(64668):4213815402:3915455950       (data signature reset)

. save $deriv/ckn`category'`dataset'.dta, replace
file ~/Documents/SocResearch/COVID_Knowledge_News/data/data_derv/ckn02_demg01_Pe
> wJune2020.dta saved

. 
. 
. ***--------------------------***
. 
. log close ckn`category'`dataset'
      name:  ckn02_demg01_PewJune2020
       log:  /Users/mmking/Documents/SocResearch/COVID_Knowledge_News/covid_know
> ledge_news/stata/ckn02_demg01_PewJune2020.log
  log type:  text
 closed on:  20 Mar 2023, 13:13:56
--------------------------------------------------------------------------------
